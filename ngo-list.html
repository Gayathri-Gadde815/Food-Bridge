<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Registered NGOs - FoodBridge</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <style>
    body {
      background: url('images/bg-pattern.jpg') no-repeat center center fixed;
      background-size: cover;
    }

    .ngo-list-section {
      padding: 60px 20px;
      background-color: rgba(255, 255, 255, 0.95);
      min-height: 100vh;
    }

    .ngo-card {
      background-color: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      height: 100%;
    }

    h2 {
      text-align: center;
      margin-bottom: 40px;
      color: #28a745;
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="logo">ğŸ› FoodBridge</div>
    <div class="menu-icon" onclick="toggleMenu()">â˜°</div>
    <ul class="nav-links" id="navLinks">
      <li><a href="index.html">Home</a></li>
      <li><a href="donate.html">Donate</a></li>
      <li><a href="ngo-register.html">Register</a></li>
      <li><a href="contact-us.html">Contact Us</a></li>
    </ul>
  </nav>

  <!-- NGO List -->
  <main class="ngo-list-section container">
    <h2>ğŸ“‹ Registered NGOs</h2>
    <div class="row" id="ngoListContainer"></div>
  </main>

  <!-- Footer -->
  <footer class="container py-4 mt-5 border-top">
    <ul class="nav justify-content-center border-bottom pb-3 mb-3">
      <li class="nav-item"><a href="index.html" class="nav-link px-2 text-body-secondary">Home</a></li>
      <li class="nav-item"><a href="features.html" class="nav-link px-2 text-body-secondary">Features</a></li>
      <li class="nav-item"><a href="how-it-works.html" class="nav-link px-2 text-body-secondary">How It Works</a></li>
      <li class="nav-item"><a href="contact-us.html" class="nav-link px-2 text-body-secondary">Contact Us</a></li>
    </ul>
    <p class="text-center text-body-secondary">Â© 2025 FoodBridge</p>
  </footer>

  <!-- JS -->
  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      const container = document.getElementById("ngoListContainer");

      try {
        const res = await fetch("/api/ngos");
        const ngos = await res.json();

        if (!Array.isArray(ngos) || ngos.length === 0) {
          container.innerHTML = "<p class='text-center text-muted'>No NGOs found.</p>";
          return;
        }

        ngos.forEach((ngo) => {
          const col = document.createElement("div");
          col.className = "col-md-6 col-lg-4"; // 3 cards per row on large screen

          const state = ngo.state || "Not specified";
          const district = ngo.district || "Not specified";
          const startYear = ngo.startYear || "N/A";
          const location = ngo.location || "N/A";

          col.innerHTML = `
            <div class="ngo-card">
              <h5>ğŸ¢ <strong>${ngo.name}</strong></h5>
              <p>ğŸ“§ <strong>Email:</strong> ${ngo.email}</p>
              <p>ğŸ“ <strong>Contact:</strong> ${ngo.contact}</p>
              <p>ğŸ“… <strong>Started in:</strong> ${startYear}</p>
              <p>ğŸ—ºï¸ <strong>State:</strong> ${state}</p>
              <p>ğŸ™ï¸ <strong>District:</strong> ${district}</p>
              <p>ğŸ“ <strong>Area:</strong> ${location}</p>
            </div>
          `;

          container.appendChild(col);
        });
      } catch (error) {
        console.error("Error loading NGOs:", error);
        container.innerHTML = "<p class='text-danger'>âŒ Failed to load NGOs. Please try again later.</p>";
      }
    });
  </script>
</body>
</html>
